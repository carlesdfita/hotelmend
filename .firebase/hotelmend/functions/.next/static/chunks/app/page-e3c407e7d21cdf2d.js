(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(5155),r=a(2115),n=a(9708),i=a(2085),l=a(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});c.displayName="Button"},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155),r=a(2115),n=a(9434);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},2751:(e,t,a)=>{Promise.resolve().then(a.bind(a,4139))},3062:(e,t,a)=>{"use strict";a.d(t,{XE:()=>r,iM:()=>n,iW:()=>s});let s=["El\xe8ctric","Lampisteria","Fusteria","Il\xb7luminaci\xf3","Climatitzaci\xf3","General"],r=["Oberta","En Progr\xe9s","Tancada"],n=["Urgent","Important","Poc Important"]},4139:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eD});var s=a(5155),r=a(2115),n=a(9252),i=a(221),l=a(2177),o=a(5594),c=a(285),d=a(9708),m=a(9434),u=a(968),p=a(2085);let x=(0,p.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(u.b,{ref:t,className:(0,m.cn)(x(),a),...r})});f.displayName=u.b.displayName;let h=l.Op,g=r.createContext({}),j=e=>{let{...t}=e;return(0,s.jsx)(g.Provider,{value:{name:t.name},children:(0,s.jsx)(l.xI,{...t})})},b=()=>{let e=r.useContext(g),t=r.useContext(N),{getFieldState:a,formState:s}=(0,l.xW)(),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},N=r.createContext({}),y=r.forwardRef((e,t)=>{let{className:a,...n}=e,i=r.useId();return(0,s.jsx)(N.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,m.cn)("space-y-2",a),...n})})});y.displayName="FormItem";let v=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:n,formItemId:i}=b();return(0,s.jsx)(f,{ref:t,className:(0,m.cn)(n&&"text-destructive",a),htmlFor:i,...r})});v.displayName="FormLabel";let w=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:i,formMessageId:l}=b();return(0,s.jsx)(d.DX,{ref:t,id:n,"aria-describedby":r?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!r,...a})});w.displayName="FormControl",r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:n}=b();return(0,s.jsx)("p",{ref:t,id:n,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})}).displayName="FormDescription";let C=r.forwardRef((e,t)=>{var a;let{className:r,children:n,...i}=e,{error:l,formMessageId:o}=b(),c=l?String(null!==(a=null==l?void 0:l.message)&&void 0!==a?a:""):n;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,m.cn)("text-sm font-medium text-destructive",r),...i,children:c}):null});C.displayName="FormMessage";var A=a(2523);let I=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,m.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});I.displayName="Textarea";var S=a(3081),k=a(9556),T=a(7381),D=a(518);let R=S.bL;S.YJ;let E=S.WT,z=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(S.l9,{ref:t,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(S.In,{asChild:!0,children:(0,s.jsx)(k.A,{className:"h-4 w-4 opacity-50"})})]})});z.displayName=S.l9.displayName;let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.PP,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})});O.displayName=S.PP.displayName;let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.wn,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})});P.displayName=S.wn.displayName;let F=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(S.ZL,{children:(0,s.jsxs)(S.UC,{ref:t,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(O,{}),(0,s.jsx)(S.LM,{className:(0,m.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(P,{})]})})});F.displayName=S.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.JU,{ref:t,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=S.JU.displayName;let _=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(S.q7,{ref:t,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(S.VF,{children:(0,s.jsx)(D.A,{className:"h-4 w-4"})})}),(0,s.jsx)(S.p4,{children:r})]})});_.displayName=S.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.wv,{ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=S.wv.displayName;var U=a(3062),L=a(4477);let V=(0,L.createServerReference)("40d3ccbcb2a0f7dbdd397ef79c2c325d5ff91acec9",L.callServer,void 0,L.findSourceMapURL,"suggestRelatedTickets");var M=a(6695),J=a(172);let B=o.z.object({description:o.z.string().min(10,{message:"La descripci\xf3 ha de tenir almenys 10 car\xe0cters."}),location:o.z.string().min(1,{message:"La ubicaci\xf3 \xe9s obligat\xf2ria."}),repairType:o.z.string().min(1,{message:"El tipus de reparaci\xf3 \xe9s obligatori."}),importance:o.z.enum(U.iM,{message:"La import\xe0ncia \xe9s obligat\xf2ria."})}),H=(e,t)=>{let a;return function(){for(var s=arguments.length,r=Array(s),n=0;n<s;n++)r[n]=arguments[n];return new Promise(s=>{clearTimeout(a),a=setTimeout(()=>s(e(...r)),t)})}};function Z(e){let{onSubmit:t,initialData:a,submitButtonText:n="Crear Incid\xe8ncia"}=e,[o,d]=(0,r.useState)(U.iW),[m,u]=(0,r.useState)([]),[p,x]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("repairTypes");e&&d(JSON.parse(e));let t=localStorage.getItem("locations");t&&u(JSON.parse(t))},[]);let b=(0,l.mN)({resolver:(0,i.u)(B),defaultValues:a||{importance:"Important"}});(0,r.useEffect)(()=>{a&&Object.keys(a).length>0?(b.reset(a),a.location&&!m.includes(a.location)&&"Altra"!==a.location?(g(!0),x(a.location)):(g(!1),x(""))):(b.reset({description:"",location:m.length>0?m[0]:"",repairType:o.length>0?o[0]:"General",importance:"Important"}),g(!1),x("")),S([])},[a,b,o,m]);let[N,S]=(0,r.useState)([]),[k,T]=(0,r.useState)(!1),D=(0,r.useCallback)(async e=>{if(e.trim().length<10){S([]);return}T(!0);try{let t=await V({description:e});S(t)}catch(e){console.error("Error fetching suggestions:",e),S([])}T(!1)},[]),O=(0,r.useMemo)(()=>H(D,1e3),[D]),P=e=>{let t=e.target.value;b.setValue("description",t,{shouldValidate:!0}),O(t)};return(0,s.jsx)(h,{...b,children:(0,s.jsxs)("form",{onSubmit:b.handleSubmit(function(e){let s={...e};if("Altra"===e.location&&f){if(""===p.trim()){b.setError("location",{type:"manual",message:"Especifiqueu la ubicaci\xf3 personalitzada o seleccioneu-ne una d'existent."});return}s.location=p.trim()}else if("Altra"===e.location&&!f){b.setError("location",{type:"manual",message:"Seleccioneu 'Altra' i especifiqueu la ubicaci\xf3."});return}t(s),S([]),a||(g(!1),x(""))}),className:"space-y-6",children:[(0,s.jsx)(j,{control:b.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(v,{children:"Descripci\xf3"}),(0,s.jsx)(w,{children:(0,s.jsx)(I,{placeholder:"Descriviu el problema en detall (ex: 'L'aixeta de l'habitaci\xf3 203 degota')",...t,onChange:P,rows:4})}),(0,s.jsx)(C,{})]})}}),k&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(J.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Carregant suggeriments..."]}),N.length>0&&!k&&(0,s.jsxs)(M.Zp,{children:[(0,s.jsxs)(M.aR,{children:[(0,s.jsx)(M.ZB,{className:"text-lg",children:"Incid\xe8ncies Anteriors Suggerides"}),(0,s.jsx)(M.BT,{children:"Aquestes incid\xe8ncies anteriors podrien estar relacionades amb el vostre problema:"})]}),(0,s.jsx)(M.Wu,{className:"space-y-2 max-h-48 overflow-y-auto",children:N.map(e=>(0,s.jsxs)("div",{className:"text-sm p-2 border rounded-md bg-muted/50",children:[(0,s.jsxs)("p",{className:"font-medium",children:["ID d'Incid\xe8ncia: ",e.ticketId]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:e.description})]},e.ticketId))})]}),(0,s.jsx)(j,{control:b.control,name:"location",render:e=>{let{field:t}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(v,{children:"\xc0rea / N\xfamero d'Habitaci\xf3"}),m.length>0?(0,s.jsxs)(R,{onValueChange:e=>{t.onChange(e),"Altra"===e?(g(!0),(null==a?void 0:a.location)&&!m.includes(a.location)&&"Altra"===e?x(a.location):x("")):(g(!1),x(""))},value:t.value,children:[(0,s.jsx)(w,{children:(0,s.jsx)(z,{children:(0,s.jsx)(E,{placeholder:"Seleccionar ubicaci\xf3 predefinida"})})}),(0,s.jsxs)(F,{children:[m.map(e=>(0,s.jsx)(_,{value:e,children:e},e)),(0,s.jsx)(_,{value:"Altra",children:"Altra (especificar)"})]})]}):(0,s.jsx)(w,{children:(0,s.jsx)(A.p,{placeholder:"ex: Habitaci\xf3 101, Vest\xedbul, Cuina",...t,onChange:e=>{t.onChange(e.target.value),g(!0),x(e.target.value)}})}),f&&m.length>0&&(0,s.jsx)(w,{children:(0,s.jsx)(A.p,{placeholder:"Especificar una altra ubicaci\xf3",value:p,onChange:e=>x(e.target.value),className:"mt-2"})}),!m.length&&(0,s.jsx)(A.p,{placeholder:"ex: Habitaci\xf3 101, Vest\xedbul, Cuina",value:t.value,onChange:e=>t.onChange(e.target.value),className:"hidden"}),(0,s.jsx)(C,{})]})}}),(0,s.jsx)(j,{control:b.control,name:"repairType",render:e=>{let{field:t}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(v,{children:"Tipus de Reparaci\xf3"}),(0,s.jsxs)(R,{onValueChange:t.onChange,value:t.value,defaultValue:t.value,children:[(0,s.jsx)(w,{children:(0,s.jsx)(z,{children:(0,s.jsx)(E,{placeholder:"Seleccionar tipus de reparaci\xf3"})})}),(0,s.jsx)(F,{children:o.map(e=>(0,s.jsx)(_,{value:e,children:e},e))})]}),(0,s.jsx)(C,{})]})}}),(0,s.jsx)(j,{control:b.control,name:"importance",render:e=>{let{field:t}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(v,{children:"Import\xe0ncia"}),(0,s.jsxs)(R,{onValueChange:t.onChange,value:t.value,defaultValue:t.value,children:[(0,s.jsx)(w,{children:(0,s.jsx)(z,{children:(0,s.jsx)(E,{placeholder:"Seleccionar nivell d'import\xe0ncia"})})}),(0,s.jsx)(F,{children:U.iM.map(e=>(0,s.jsx)(_,{value:e,children:e},e))})]}),(0,s.jsx)(C,{})]})}}),(0,s.jsx)(c.$,{type:"submit",className:"w-full",children:n})]})})}let $=(0,p.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",warning:"border-transparent bg-yellow-400 text-yellow-900 dark:bg-yellow-500 dark:text-yellow-50 hover:bg-yellow-400/80 dark:hover:bg-yellow-500/80",attention:"border-transparent bg-orange-500 text-orange-50 dark:bg-orange-600 dark:text-orange-100 hover:bg-orange-500/80 dark:hover:bg-orange-600/80"}},defaultVariants:{variant:"default"}});function q(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,m.cn)($({variant:a}),t),...r})}var G=a(9829),Q=a(3235),W=a(9384),X=a(7569),Y=a(3640),K=a(5079),ee=a(1133),et=a(1358),ea=a(8127),es=a(1949),er=a(8044),en=a(6971),ei=a(5871),el=a(3662),eo=a(8328),ec=a(8350),ed=a(5222),em=a(4838);let eu={Elèctric:G.A,Lampisteria:Q.A,Fusteria:W.A,Il·luminació:X.A,Climatització:Y.A,General:K.A},ep={Oberta:{icon:ee.A,variant:"destructive"},"En Progr\xe9s":{icon:et.A,variant:"warning"},Tancada:{icon:ea.A,variant:"success"}},ex={Urgent:{icon:es.A,variant:"destructive",label:"Urgent"},Important:{icon:er.A,variant:"warning",label:"Important"},"Poc Important":{icon:en.A,variant:"default",label:"Poc Imp."}};function ef(e){let{ticket:t,onUpdateStatus:a,onEditTicket:r}=e,n=eu[t.repairType]||ei.A,i=ep[t.status].icon,l=ex[t.importance].icon,o=e=>{a(t.id,e)};return(0,s.jsxs)(M.Zp,{className:"w-full shadow-md hover:shadow-lg transition-shadow duration-200 flex flex-col sm:flex-row",children:[(0,s.jsxs)("div",{className:"flex-grow p-3 pr-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,s.jsxs)(M.ZB,{className:"text-sm font-headline flex items-center",children:[(0,s.jsx)(n,{className:"mr-1.5 h-3.5 w-3.5 text-primary"}),t.repairType]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsxs)(q,{variant:ex[t.importance].variant||"default",className:"text-xs px-1.5 py-0.5 h-[18px] leading-tight",children:[(0,s.jsx)(l,{className:"mr-1 h-2.5 w-2.5"}),ex[t.importance].label]}),(0,s.jsxs)(q,{variant:ep[t.status].variant||"default",className:"text-xs px-1.5 py-0.5 h-[18px] leading-tight",children:[(0,s.jsx)(i,{className:"mr-1 h-2.5 w-2.5"}),t.status]})]})]}),(0,s.jsx)("p",{className:"text-xs text-foreground leading-snug line-clamp-2 mb-1 sm:mb-1.5",children:t.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(el.A,{className:"mr-1 h-3 w-3"})," ",t.location]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eo.A,{className:"mr-1 h-3 w-3"}),(0,s.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),(0,s.jsx)("div",{className:"flex-shrink-0 p-2 sm:border-l sm:pl-2 flex items-center justify-center",children:(0,s.jsxs)(em.rI,{children:[(0,s.jsx)(em.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"ghost",size:"icon",className:"h-7 w-7",children:[(0,s.jsx)(ec.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"M\xe9s opcions"})]})}),(0,s.jsxs)(em.SQ,{align:"end",children:[(0,s.jsxs)(em._2,{onClick:()=>r(t),className:"text-sm",children:[(0,s.jsx)(ed.A,{className:"mr-2 h-3.5 w-3.5"}),"Editar Incid\xe8ncia"]}),(0,s.jsx)(em.mB,{}),"En Progr\xe9s"!==t.status&&"Tancada"!==t.status&&(0,s.jsx)(em._2,{onClick:()=>o("En Progr\xe9s"),className:"text-sm",children:"Marcar En Progr\xe9s"}),"Tancada"!==t.status&&(0,s.jsx)(em._2,{onClick:()=>o("Tancada"),className:"text-sm",children:"Marcar Com Completa"}),"Tancada"===t.status&&"Oberta"!==t.status&&(0,s.jsx)(em._2,{onClick:()=>o("Oberta"),className:"text-sm",children:"Reobrir Incid\xe8ncia"})]})]})})]})}function eh(e){let{tickets:t,onUpdateStatus:a,onEditTicket:r}=e;return 0===t.length?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("p",{className:"text-xl text-muted-foreground",children:"No s'han trobat incid\xe8ncies de manteniment."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Intenteu ajustar els filtres o creeu una nova incid\xe8ncia."})]}):(0,s.jsx)("div",{className:"flex flex-col gap-4",children:t.map(e=>(0,s.jsx)(ef,{ticket:e,onUpdateStatus:a,onEditTicket:r},e.id))})}var eg=a(3587),ej=a(5318);function eb(e){let{filters:t,onFilterChange:a}=e,[n,i]=(0,r.useState)(U.iW),[l,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("repairTypes");e?i(JSON.parse(e)):localStorage.setItem("repairTypes",JSON.stringify(U.iW));let t=localStorage.getItem("locations");if(t)o(JSON.parse(t));else{let e=["Recepci\xf3 Vest\xedbul","Cuina Principal","Gimn\xe0s","Piscina","Habitaci\xf3 305"];localStorage.setItem("locations",JSON.stringify(e)),o(e)}},[]);let d=(e,s)=>{let r=t[e],n=r.includes(s)?r.filter(e=>e!==s):[...r,s];a({...t,[e]:n})},m=(e,t,a,s,r)=>0===e.length?a:e.length===t.length?"Tots els ".concat(r):1===e.length?e[0]:"".concat(e.length," ").concat(r," seleccionats"),u=m(t.location,l,"Totes les ubicacions","ubicaci\xf3","ubicacions"),p=m(t.repairType,n,"Tots els tipus","tipus","tipus"),x=m(t.status,U.XE,"Cap estat","estat","estats"),h=m(t.importance,U.iM,"Totes les import\xe0ncies","import\xe0ncia","import\xe0ncies");return(0,s.jsx)(M.Zp,{className:"mb-6 p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{htmlFor:"filter-location-dropdown",children:"Ubicaci\xf3"}),(0,s.jsxs)(em.rI,{children:[(0,s.jsx)(em.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",id:"filter-location-dropdown",className:"w-full justify-between mt-1",children:[(0,s.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-full",children:u}),(0,s.jsx)(eg.A,{className:"ml-2 h-4 w-4 opacity-50 flex-shrink-0"})]})}),(0,s.jsxs)(em.SQ,{className:"w-56",children:[(0,s.jsx)(em.lp,{children:"Seleccionar Ubicacions"}),(0,s.jsx)(em.mB,{}),l.map(e=>(0,s.jsx)(em.hO,{checked:t.location.includes(e),onCheckedChange:()=>d("location",e),children:e},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{htmlFor:"filter-repair-type-dropdown",children:"Tipus de Reparaci\xf3"}),(0,s.jsxs)(em.rI,{children:[(0,s.jsx)(em.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",id:"filter-repair-type-dropdown",className:"w-full justify-between mt-1",children:[(0,s.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-full",children:p}),(0,s.jsx)(eg.A,{className:"ml-2 h-4 w-4 opacity-50 flex-shrink-0"})]})}),(0,s.jsxs)(em.SQ,{className:"w-56",children:[(0,s.jsx)(em.lp,{children:"Seleccionar Tipus"}),(0,s.jsx)(em.mB,{}),n.map(e=>(0,s.jsx)(em.hO,{checked:t.repairType.includes(e),onCheckedChange:()=>d("repairType",e),children:e},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{htmlFor:"filter-status-dropdown",children:"Estat"}),(0,s.jsxs)(em.rI,{children:[(0,s.jsx)(em.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",id:"filter-status-dropdown",className:"w-full justify-between mt-1",children:[(0,s.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-full",children:x}),(0,s.jsx)(eg.A,{className:"ml-2 h-4 w-4 opacity-50 flex-shrink-0"})]})}),(0,s.jsxs)(em.SQ,{className:"w-56",children:[(0,s.jsx)(em.lp,{children:"Seleccionar Estats"}),(0,s.jsx)(em.mB,{}),U.XE.map(e=>(0,s.jsx)(em.hO,{checked:t.status.includes(e),onCheckedChange:()=>d("status",e),children:e},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{htmlFor:"filter-importance-dropdown",children:"Import\xe0ncia"}),(0,s.jsxs)(em.rI,{children:[(0,s.jsx)(em.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",id:"filter-importance-dropdown",className:"w-full justify-between mt-1",children:[(0,s.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-full",children:h}),(0,s.jsx)(eg.A,{className:"ml-2 h-4 w-4 opacity-50 flex-shrink-0"})]})}),(0,s.jsxs)(em.SQ,{className:"w-56",children:[(0,s.jsx)(em.lp,{children:"Seleccionar Import\xe0ncia"}),(0,s.jsx)(em.mB,{}),U.iM.map(e=>(0,s.jsx)(em.hO,{checked:t.importance.includes(e),onCheckedChange:()=>d("importance",e),children:e},e))]})]})]}),(0,s.jsxs)(c.$,{onClick:()=>{a({repairType:[],location:[],status:["Oberta","En Progr\xe9s"],importance:[]})},variant:"outline",className:"w-full lg:w-auto",children:[(0,s.jsx)(ej.A,{className:"mr-2 h-4 w-4"})," Restablir"]})]})})}var eN=a(5452);let ey=eN.bL,ev=eN.l9,ew=eN.ZL;eN.bm;let eC=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eN.hJ,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});eC.displayName=eN.hJ.displayName;let eA=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(ew,{children:[(0,s.jsx)(eC,{}),(0,s.jsxs)(eN.UC,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(eN.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(ej.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eA.displayName=eN.UC.displayName;let eI=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eI.displayName="DialogHeader";let eS=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eN.hE,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});eS.displayName=eN.hE.displayName;let ek=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eN.VY,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});ek.displayName=eN.VY.displayName;var eT=a(4301);function eD(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=[{id:"1",description:"La llum del bany de l'Habitaci\xf3 305 parpelleja constantment. Necessita reempla\xe7ament.",location:"Habitaci\xf3 305",repairType:"Il\xb7luminaci\xf3",status:"Oberta",importance:"Important",createdAt:new Date(new Date().setDate(new Date().getDate()-2)),updatedAt:new Date(new Date().setDate(new Date().getDate()-2))},{id:"2",description:"El lavabo de la cuina principal est\xe0 embussat. L'aigua drena molt lentament.",location:"Cuina Principal",repairType:"Lampisteria",status:"En Progr\xe9s",importance:"Urgent",createdAt:new Date(new Date().setDate(new Date().getDate()-1)),updatedAt:new Date},{id:"3",description:"L'aire condicionat del gimn\xe0s no refreda efica\xe7ment. Sembla que expulsa aire calent.",location:"Gimn\xe0s",repairType:"Climatitzaci\xf3",status:"Oberta",importance:"Important",createdAt:new Date,updatedAt:new Date},{id:"4",description:"El panell de fusta del taulell de recepci\xf3 est\xe0 solt.",location:"Recepci\xf3 Vest\xedbul",repairType:"Fusteria",status:"Tancada",importance:"Poc Important",createdAt:new Date(new Date().setDate(new Date().getDate()-5)),updatedAt:new Date(new Date().setDate(new Date().getDate()-3))}];localStorage.getItem("locations")||localStorage.setItem("locations",JSON.stringify(["Recepci\xf3 Vest\xedbul","Cuina Principal","Gimn\xe0s","Piscina","Habitaci\xf3 305"])),localStorage.getItem("repairTypes")||localStorage.setItem("repairTypes",JSON.stringify(["El\xe8ctric","Lampisteria","Fusteria","Il\xb7luminaci\xf3","Climatitzaci\xf3","General"])),t(e)},[]);let[x,f]=(0,r.useState)({repairType:[],location:[],status:["Oberta","En Progr\xe9s"],importance:[]});return(0,r.useEffect)(()=>{let t=[...e];x.repairType.length>0&&(t=t.filter(e=>x.repairType.includes(e.repairType))),x.location.length>0&&(t=t.filter(e=>x.location.includes(e.location))),t=x.status.length>0?t.filter(e=>x.status.includes(e.status)):[],x.importance.length>0&&(t=t.filter(e=>x.importance.includes(e.importance))),t.sort((e,t)=>{let a={Urgent:1,Important:2,"Poc Important":3},s={Oberta:1,"En Progr\xe9s":2,Tancada:3};return a[e.importance]!==a[t.importance]?a[e.importance]-a[t.importance]:s[e.status]!==s[t.status]?s[e.status]-s[t.status]:t.createdAt.getTime()-e.createdAt.getTime()}),i(t)},[e,x]),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,s.jsx)(n.A,{}),(0,s.jsxs)("main",{className:"flex-grow container mx-auto p-4 md:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline font-bold text-foreground mb-4 sm:mb-0",children:"Incid\xe8ncies de Manteniment"}),(0,s.jsxs)(ey,{open:l,onOpenChange:o,children:[(0,s.jsx)(ev,{asChild:!0,children:(0,s.jsxs)(c.$,{size:"lg",children:[(0,s.jsx)(eT.A,{className:"mr-2 h-5 w-5"})," Crear Nova Incid\xe8ncia"]})}),(0,s.jsxs)(eA,{className:"sm:max-w-[525px]",children:[(0,s.jsxs)(eI,{children:[(0,s.jsx)(eS,{className:"font-headline text-2xl",children:"Crear Nova Incid\xe8ncia de Manteniment"}),(0,s.jsx)(ek,{children:"Completeu els detalls a continuaci\xf3 per informar d'un problema de manteniment."})]}),(0,s.jsx)(Z,{onSubmit:e=>{let a={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date,status:"Oberta"};t(e=>[a,...e]),o(!1)},submitButtonText:"Crear Incid\xe8ncia"})]})]})]}),(0,s.jsx)(eb,{filters:x,onFilterChange:f}),(0,s.jsx)(eh,{tickets:a,onUpdateStatus:(e,a)=>{t(t=>t.map(t=>t.id===e?{...t,status:a,updatedAt:new Date}:t))},onEditTicket:e=>{p(e),m(!0)}}),(0,s.jsx)(ey,{open:d,onOpenChange:e=>{m(e),e||p(null)},children:(0,s.jsxs)(eA,{className:"sm:max-w-[525px]",children:[(0,s.jsxs)(eI,{children:[(0,s.jsx)(eS,{className:"font-headline text-2xl",children:"Editar Incid\xe8ncia"}),(0,s.jsx)(ek,{children:"Modifiqueu els detalls de la incid\xe8ncia a continuaci\xf3."})]}),u&&(0,s.jsx)(Z,{onSubmit:e=>{u&&(t(t=>t.map(t=>t.id===u.id?{...u,...e,updatedAt:new Date}:t)),m(!1),p(null))},initialData:{description:u.description,location:u.location,repairType:u.repairType,importance:u.importance},submitButtonText:"Desar Canvis"})]})})]}),(0,s.jsxs)("footer",{className:"text-center p-6 text-muted-foreground text-sm border-t",children:["HotelMend \xa9 ",new Date().getFullYear()]})]})}},4838:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>u,_2:()=>p,hO:()=>x,lp:()=>f,mB:()=>h,rI:()=>d,ty:()=>m});var s=a(5155),r=a(2115),n=a(9449),i=a(3158),l=a(518),o=a(154),c=a(9434);let d=n.bL,m=n.l9;n.YJ,n.ZL,n.Pb,n.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:l,...o}=e;return(0,s.jsxs)(n.ZP,{ref:t,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...o,children:[l,(0,s.jsx)(i.A,{className:"ml-auto"})]})}).displayName=n.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.G5.displayName;let u=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});u.displayName=n.UC.displayName;let p=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.q7,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...i})});p.displayName=n.q7.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,checked:i,...o}=e;return(0,s.jsxs)(n.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})}),r]})});x.displayName=n.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(n.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=n.hN.displayName;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...i})});f.displayName=n.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});h.displayName=n.wv.displayName},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=a(5155),r=a(2115),n=a(9434);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},9252:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(5155),r=a(2876),n=a(8271),i=a(6874),l=a.n(i),o=a(4838),c=a(285);function d(){return(0,s.jsx)("header",{className:"bg-card border-b shadow-sm",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 md:px-6 lg:px-8 h-16 flex items-center justify-between",children:[(0,s.jsxs)(l(),{href:"/",className:"flex items-center",children:[(0,s.jsx)(r.A,{className:"h-8 w-8 text-primary mr-2"}),(0,s.jsx)("h1",{className:"text-2xl font-headline font-bold text-primary",children:"HotelMend"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(o.rI,{children:[(0,s.jsx)(o.ty,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",size:"icon",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Obrir men\xfa de configuraci\xf3"})]})}),(0,s.jsxs)(o.SQ,{align:"end",children:[(0,s.jsx)(o.lp,{children:"Configuraci\xf3"}),(0,s.jsx)(o.mB,{}),(0,s.jsx)(o._2,{asChild:!0,children:(0,s.jsx)(l(),{href:"/settings/repair-types",children:"Configurar Tipologies"})}),(0,s.jsx)(o._2,{asChild:!0,children:(0,s.jsx)(l(),{href:"/settings/locations",children:"Configurar Ubicacions"})})]})]})})]})})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[668,422,416,103,441,684,358],()=>t(2751)),_N_E=e.O()}]);