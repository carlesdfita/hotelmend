(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var r=a(5155),s=a(2115),i=a(9708),n=a(2085),o=a(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...l}=e,u=c?i.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:s,size:n,className:a})),ref:t,...l})});c.displayName="Button"},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),i=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},2696:(e,t,a)=>{"use strict";a.d(t,{Rf:()=>m,Hb:()=>y,Cr:()=>u,Kz:()=>h,aS:()=>v,Zx:()=>f,ah:()=>g,SM:()=>x,TD:()=>l,Mz:()=>p});var r=a(3915),s=a(5317);let i=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyDdBz0H6Xxbaty0bPZeO62BegoSycJW9TY",authDomain:"hotelmend.firebaseapp.com",projectId:"hotelmend",storageBucket:"hotelmend.firebasestorage.app",messagingSenderId:"477752168574",appId:"1:477752168574:web:dd2076142722dd7be1c82f"}),n=(0,s.aU)(i),o="tickets",d="locations",c="repairTypes";async function l(){let e=(0,s.rJ)(n,o),t=(0,s.P)(e,(0,s.My)("createdAt","desc")),a=await (0,s.GG)(t),r=[];return a.forEach(e=>{let t=e.data(),a={id:e.id,description:t.description,location:t.location,repairType:t.repairType,status:t.status,importance:t.importance,createdAt:t.createdAt?new Date(t.createdAt.toDate()):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt.toDate()):new Date,suggestedTickets:t.suggestedTickets||[]};r.push(a)}),r}async function u(e){let t=(0,s.rJ)(n,o);return(await (0,s.gS)(t,{...e,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)(),suggestedTickets:e.suggestedTickets||[]})).id}async function p(e,t){let a=(0,s.H9)(n,o,e);await (0,s.mZ)(a,{...t,updatedAt:(0,s.O5)()})}async function f(e){let t=(0,s.H9)(n,o,e);await (0,s.kd)(t)}async function g(){let e=(0,s.rJ)(n,d),t=await (0,s.GG)(e),a=[];return t.forEach(e=>{let t=e.data();t&&"string"==typeof t.name&&a.push({id:e.id,name:t.name})}),a.sort((e,t)=>e.name.localeCompare(t.name)),a}async function m(e){let t=(0,s.rJ)(n,d);return(await (0,s.gS)(t,{name:e})).id}async function h(e){let t=(0,s.H9)(n,d,e);await (0,s.kd)(t)}async function x(){let e=(0,s.rJ)(n,c),t=await (0,s.GG)(e),a=[];return t.forEach(e=>{let t=e.data();t&&"string"==typeof t.name&&a.push({id:e.id,name:t.name})}),a.sort((e,t)=>e.name.localeCompare(t.name)),a}async function y(e){let t=(0,s.rJ)(n,c);return(await (0,s.gS)(t,{name:e})).id}async function v(e){let t=(0,s.H9)(n,c,e);await (0,s.kd)(t)}},3336:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),s=a(2115),i=a(285),n=a(2523),o=a(6695),d=a(4301),c=a(7223),l=a(7481),u=a(2696);function p(){let[e,t]=(0,s.useState)([]),[a,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),{toast:x}=(0,l.dj)(),y=async()=>{try{g(!0),h(null);let e=await (0,u.SM)();t(e)}catch(e){console.error("Error fetching repair types from Firestore:",e),e instanceof Error?h("No s'han pogut carregar les tipologies de reparaci\xf3: ".concat(e.message)):h("No s'han pogut carregar les tipologies de reparaci\xf3 a causa d'un error desconegut."),t([])}finally{g(!1)}};(0,s.useEffect)(()=>{y()},[]);let v=async()=>{if(""===a.trim()){x({title:"Error",description:"El nom de la tipologia no pot estar buit.",variant:"destructive"});return}if(e.map(e=>e.name.toLowerCase()).includes(a.trim().toLowerCase())){x({title:"Error",description:"Aquesta tipologia ja existeix.",variant:"destructive"});return}try{await (0,u.Hb)(a.trim()),p(""),await y(),x({title:"\xc8xit",description:'Tipologia "'.concat(a.trim(),'" afegida.')})}catch(e){console.error("Error adding repair type to Firestore:",e),e instanceof Error?h("No s'ha pogut afegir la tipologia: ".concat(e.message)):h("No s'ha pogut afegir la tipologia a causa d'un error desconegut."),x({title:"Error",description:"No s'ha pogut afegir la tipologia.",variant:"destructive"})}},b=async(e,t)=>{try{await (0,u.aS)(e),await y(),x({title:"\xc8xit",description:'Tipologia "'.concat(t,'" eliminada.')})}catch(e){console.error("Error deleting repair type from Firestore:",e),e instanceof Error?h("No s'ha pogut eliminar la tipologia: ".concat(e.message)):h("No s'ha pogut eliminar la tipologia a causa d'un error desconegut."),x({title:"Error",description:"No s'ha pogut eliminar la tipologia.",variant:"destructive"})}};return f?(0,r.jsx)("div",{className:"flex flex-col min-h-screen bg-background justify-center items-center",children:(0,r.jsx)("p",{children:"Carregant tipologies de reparaci\xf3..."})}):m?(0,r.jsx)("div",{className:"flex flex-col min-h-screen bg-background justify-center items-center",children:(0,r.jsx)("p",{className:"text-destructive",children:m})}):(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{className:"text-2xl font-headline",children:"Configurar Tipologies de Reparaci\xf3"}),(0,r.jsx)(o.BT,{children:"Afegiu o elimineu els tipus de reparaci\xf3 disponibles al sistema."})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Afegir Nova Tipologia"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.p,{type:"text",value:a,onChange:e=>p(e.target.value),placeholder:"Ex: Jardineria, Pintura",className:"max-w-sm",onKeyPress:e=>{"Enter"===e.key&&v()}}),(0,r.jsxs)(i.$,{onClick:v,children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Afegir Tipologia"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Llistat de Tipologies Existents"}),0===e.length?(0,r.jsx)("p",{className:"text-muted-foreground",children:"No hi ha tipologies configurades."}):(0,r.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-md",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>b(e.id,e.name),"aria-label":"Eliminar ".concat(e.name),children:(0,r.jsx)(c.A,{className:"h-4 w-4 text-destructive"})})]},e.id))})]})]})]})}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>n,aR:()=>o});var r=a(5155),s=a(2115),i=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});l.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>p});var r=a(2115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=o(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},7715:(e,t,a)=>{Promise.resolve().then(a.bind(a,3336))},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2596),s=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,668,874,441,684,358],()=>t(7715)),_N_E=e.O()}]);